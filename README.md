# bettingCurrencyTest
Тестовое задание.

## Задание
Необходимо получать и отображать список валют и их курс относительно выбранной валюты.
#### Реализовать:
- возможность добавления валюты в избранное и хранение списка в БД.
- возможность отсортировать список по алфавиту и значениям курсов
#### Стек
Kotlin, MVVM, StateFlow, Coroutines, Room, Hilt
#### API
https://github.com/exchangeratesapi/exchangeratesapi

#### Как запустить
В файле local.properties добавить apiKey=${apiKey}, полученный на https://apilayer.com/marketplace/description/exchangerates_data-api, запустить приложение.

#### Демонстрация работы
https://user-images.githubusercontent.com/4568712/168664732-f205d6e5-f05c-4fea-801e-cfab1468292e.mp4

#### Отличия от задания
Сделал динамический список при переходе по вкладкам, мне так показалось полезнее, если делать через граф навигацию нижнюю с navigationCompose, то получались только отдельные экраны - основной список и избранное.

#### Перформанс
В дебаг сборке без включенного minify и специальных pro-guard rules для композа lazy column с большим количеством элементов очень медленно работает. В release сборке комфортно, надо для этого подписать приложение.
см. [ссылка на багтрекер](https://issuetracker.google.com/issues/210040434) и [ссылка на обсуждение](https://www.reddit.com/r/androiddev/comments/n61qxh/jetpack_compose_lazycolumn_laggy/)

#### Что можно было бы доделать 
* При смене валюты скроллить в дропдаун листе до выбранной автоматически. Сейчас это очень неудобно, но в DropDownMenu я такой возможности не нашел, наверное нужно свой Composable писать.
* Переделать загрузку курсов - состояние Loading на использование свайп рефреша вместо circularIndicator. Сейчас неконсистентно выглядит анимация.
* Избавиться от sealed класса в uiState, сначала подумал, что будет удобно, но на практике очень неудобно было копировать значения со вложенными sealed классами.
* Восстанавливать стейт через savedInstantState во ViewModel.
* Нормализовать базу данных, сейчас при желании использовать другие хранилища, связанные с валютами - придется в любом случае создавать табличку валют, таблицу любимых и так далее.
